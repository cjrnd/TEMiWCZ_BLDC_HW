* F:\Studia\2stp\3SEM\MOC_CZE\HW\TEMiWCZ_BLDC_HW\spice\frontend.asc
M1 vcc N004 out+ out+ IRF8721
R2 bemf N006 100m
V1 N017 0 48
M2 out+ N010 N012 N012 IRF8721
M3 vcc N001 out- out- IRF8721
M4 out- N011 N013 N013 IRF8721
R3 N012 0 1m
R4 N013 0 1m
R5 N004 A {Rg}
R6 N010 _A {Rg}
R7 N001 B {Rg}
R8 N011 _B {Rg}
L1 out+ N006 250µ
V2 test 0 PULSE(-1 1 0 250u 250u 1p 500u)
R9 vcc NC_01 50
C1 NC_02 out+ 10µ
R10 out+ NC_03 50
C2 NC_04 N012 10µ
R11 vcc NC_05 50
C3 NC_06 out- 10µ
R12 out- NC_07 50
C4 NC_08 N013 10µ
C5 vcc 0 500µ
C6 vcc 0 100n
R1 vcc N017 100m
V3 testt 0 SINE(0 {2*AMPL} 500 0 0 0)
D5 out+ vcc VS-E5PH7506
D6 N012 out+ VS-E5PH7506
D7 out- vcc VS-E5PH7506
D8 N013 out- VS-E5PH7506
A1 N002 0 N003 0 0 0 A 0 AND tripdt=10n Vhigh={VH}
A2 N005 N007 0 0 0 N008 N002 0 SCHMITT vt=0 vh=0 Vhigh={VH}
A3 0 N002 0 0 0 N009 N003 0 AND td={dt} Vhigh={VH}
A4 0 N009 0 N008 0 0 _A 0 AND tripdt=10n Vhigh={VH}
V6 bemf out- SINE(0 5 {freq} 0 0 30)
C7 bemf N006 1n Rser=20
V7 N016 0 SINE(0 {AMPL} 50 0 0 180)
V8 N018 0 PULSE({-AMPL} {AMPL} 0 16u 16u 0 16u)
A5 N014 0 N015 0 0 0 B 0 AND tripdt=10n Vhigh={VH}
A6 N016 N018 0 0 0 N019 N014 0 SCHMITT vt=0 vh=0 Vhigh={VH}
A7 0 N014 0 0 0 N020 N015 0 AND td={dt} Vhigh={VH}
A8 0 N020 0 N019 0 0 _B 0 AND tripdt=10n Vhigh={VH}
D1 N004 A D
D2 N010 _A D
D3 N001 B D
D4 NC_15 NC_16 D
V4 N005 0 SINE(0 {AMPL} 50 0 0 0)
V5 N007 0 PULSE({-AMPL} {AMPL} 0 16u 16u 0 16u)
.model D D
.lib C:\Users\PMB\Documents\LTspiceXVII\lib\cmp\standard.dio
.model NMOS NMOS
.model PMOS PMOS
.lib C:\Users\PMB\Documents\LTspiceXVII\lib\cmp\standard.mos
Vmod 0 Nmod SINE(0 {AMPL} 50 0 0 180)
Vmodneg 0 NmodNeg SINE(0 {AMPL} 50 0 0 0 0)
Vcar ncar 0 PULSE(-1 1 0 25u 25u 1p 50u)
Btopactrl NtopA 0 V = IF(V(nmod) < {DUTY}*V(ncar)  , {VGATE}, 0)
Bbotactrl NbotA 0 V =  IF(V(nmod) > {DUTY}*V(ncar)  , {VGATE+V(out+)},0)
Btopbctrl NtopB 0 V = IF(V(nmodneg) > {DUTY}*V(ncar) , {VGATE},0)
Bbotbctrl Nbotb 0 V = IF(V(nmodneg) < {DUTY}*V(ncar)  , {VGATE+V(out-)}, 0)
.tran 40m
.param AMPL=.9 DUTY=0.01 VGATE=10 freq=50Rg Rg=10
.param DT=1u CDT={DT/(0.691*1k)}
.param VH=30
.backanno
.end
